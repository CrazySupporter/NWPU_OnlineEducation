{"version":3,"sources":["webpack:///src/components/resources/Participants.vue","webpack:///./src/components/resources/Participants.vue?db94","webpack:///./src/components/resources/Participants.vue"],"names":["Participants","data","table_name","heads","idx","title","table_data","input","items","edit_dialog","visual","row","loadingQ","loadedQ","display_config","width","margin","padding","overflow","ruleForm","fileList","active_name","blacklisting_data","black","props","computed","fancy_data","_iteratorNormalCompletion","_didIteratorError","_iteratorError","undefined","_step","_iterator","get_iterator_default","this","next","done","item","value","role","role_title","push","err","return","mounted","table_width","class_id","$route","params","refreshParticipants","refreshBlacklisting","methods","_this","$http","post","then","resp","body","results","catch","details","$message","_this2","res","console","log","handleAdd","handleDelete","id","realname","index","_this3","$confirm","confirmButtonText","cancelButtonText","type","user_id","success","splice","error","handleAssignTA","_this4","handleCancelTA","_this5","handleChange","successUpload","response","file","$event","_this6","filename","status","handleCancelBlacklisting","_this7","resources_Participants","render","_vm","_h","$createElement","_c","_self","model","callback","$$v","expression","attrs","name","directives","rawName","style","highlight-current-row","stripe","_l","obj","key","label","align","sortable","prop","_v","course_status","scopedSlots","_u","fn","scope","icon","circle","on","click","$index","_e","staticClass","ref","action","on-success","file-list","content","size","staticRenderFns","Component","__webpack_require__","normalizeComponent","ssrContext","__webpack_exports__"],"mappings":"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","file":"static/js/23.91eceafbce30a7fe3c47.js","sourcesContent":["<template>\n    <el-container>\n        <!--班级成员管理-->\n        <el-collapse v-model=\"active_name\">\n            <el-collapse-item title=\"班级成员\" name=\"class-users\">\n                <div id=\"DataVisualizer\" v-loading=\"loadingQ\">\n                    <div v-if=\"loadedQ\">\n                        <el-table id=\"display-table\"\n                                  :data=\"fancy_data\"\n                                  :style=\"display_config\"\n                                  highlight-current-row stripe>\n                            <el-table-column v-for=\"obj in heads\"\n                                             :key=\"obj.idx\"\n                                             :label=\"obj.title\"\n                                             align=\"center\"\n                                             sortable\n                                             :prop=\"obj.idx\">\n                            </el-table-column>\n\n                            <el-table-column align=\"center\" label=\"移出教室\" v-if='course_status.role!==2'>\n                                <template slot-scope=\"scope\">\n                                    <el-button type=\"danger\"\n                                               icon=\"el-icon-delete\" circle\n                                               v-if='scope.row.role > 0'\n                                               @click=\"handleDelete(scope.row.id, scope.row.realname, scope.$index)\">\n                                    </el-button>\n                                </template>\n                            </el-table-column>\n                            <el-table-column align=\"center\" label=\"指定助教\" v-if='course_status.role===0'>\n                                <template slot-scope=\"scope\">\n                                    <el-button type=\"primary\"\n                                               icon=\"el-icon-edit\" circle\n                                               v-if='scope.row.role === 2'\n                                               @click=\"handleAssignTA(scope.row.id, scope.$index)\">\n                                    </el-button>\n                                </template>\n                            </el-table-column>\n                            <el-table-column align=\"center\" label=\"取消助教\" v-if='course_status.role===0'>\n                                <template slot-scope=\"scope\">\n                                    <el-button type=\"primary\"\n                                               icon=\"el-icon-edit\" circle\n                                               v-if='scope.row.role === 1'\n                                               @click=\"handleCancelTA(scope.row.id, scope.$index)\">\n                                    </el-button>\n                                </template>\n                            </el-table-column>\n                        </el-table>\n                    </div>\n                    <div class=\"item\" v-if='course_status.role!==2'>\n                        <el-form :model=\"ruleForm\"\n                                 ref=\"ruleForm\">\n                            <el-form-item>\n                                <el-upload class=\"upload-demo\"\n                                           action=\"/api/file/import\"\n                                           :on-success=\"successUpload\"\n                                           :file-list=\"fileList\">\n                                    <el-tooltip content=\"请上传一个xlsx文件，文件中应含有需导入学生的真实姓名\">\n                                        <el-button size=\"small\"\n                                                   type=\"primary\">导入名单\n                                        </el-button>\n                                    </el-tooltip>\n                                </el-upload>\n                            </el-form-item>\n                        </el-form>\n                    </div>\n                </div>\n            </el-collapse-item>\n            <el-collapse-item title=\"黑名单\" name=\"blacklisting\">\n                <div id=\"Blacklisting\" v-loading=\"black.loadingQ\">\n                    <div v-if=\"black.loadedQ\">\n                        <el-table id=\"blacklisting-table\"\n                                  :data=\"blacklisting_data\"\n                                  :style=\"display_config\"\n                                  highlight-current-row stripe>\n                            <el-table-column v-for=\"obj in black.heads\"\n                                             :key=\"obj.idx\"\n                                             :label=\"obj.title\"\n                                             align=\"center\"\n                                             :prop=\"obj.idx\">\n                            </el-table-column>\n                            <el-table-column align=\"center\" label=\"取消拉黑\" v-if='course_status.role < 2'>\n                                <template slot-scope=\"scope\">\n                                    <el-button type=\"warning\"\n                                               icon=\"el-icon-remove-outline\" circle\n                                               @click=\"handleCancelBlacklisting(scope.row.user_id, scope.$index)\">\n                                    </el-button>\n                                </template>\n                            </el-table-column>\n                        </el-table>\n                    </div>\n                </div>\n            </el-collapse-item>\n        </el-collapse>\n    </el-container>\n</template>\n\n<script>\n\n    export default {\n        data () {\n            return {\n                table_name: '',\n                heads: [\n                    {idx: 'nickname', title: '昵称'},\n                    {idx: 'realname', title: '真实姓名'},\n                    {idx: 'email', title: '邮箱'},\n                    {idx: 'role_title', title: '角色'}\n                ], // 表头\n                table_data: [],\n                input: { // 用户输入的内容\n                    table_name: 'users',\n                    items: {},\n                },\n                edit_dialog: { // 编辑对话框的属性\n                    visual: false,\n                    row: {}\n                },\n                loadingQ: false, // 是否处于加载中的状态\n                loadedQ: false, // 是否已经加载完成\n                display_config: {\n                    width: '1000px',\n                    margin: 'auto',\n                    padding: '5px',\n                    overflow: 'auto'\n                },\n                ruleForm: {fileList: []},\n                fileList: [],\n                active_name: 'class-users',\n                blacklisting_data: [],\n                black: {    // 黑名单表\n                    loadedQ: false,\n                    loadingQ: false,\n                    heads: [\n                        { idx: 'user_id', title: '用户id' },\n                        { idx: 'realname', title: '真实姓名' },\n                        { idx: 'date_time', title: '拉黑时间' }\n                    ]\n                }\n            };\n        },\n        props: ['course_status', 'table_width'],\n        computed: {\n            fancy_data: function () {\n                let data = [];\n                for (let item of this.table_data) {\n                    if (item.role === 0) {\n                        item.role_title = '教师';\n                    } else if (item.role === 1) {\n                        item.role_title = '助教';\n                    } else if (item.role === 2) {\n                        item.role_title = '学生';\n                    }\n                    data.push(item);\n                }\n                return data;\n            }\n        },\n        mounted: function () {\n            if (this.table_width) { // 若父页面传来了表的参数，就修改配置\n                this.display_config.width = this.table_width;\n            }\n            this.class_id = this.$route.params.class_id;\n\n            this.refreshParticipants();\n            this.refreshBlacklisting();\n        },\n        methods: {\n            refreshParticipants() {     // 刷新成员列表\n                this.loadingQ = true;\n                this.$http.post('/api/class/participants/show', {class_id: this.class_id}, null).\n                     then((resp) => {\t\t\t\t\t\t\t\t\t\t // 成功，被 showSQL 的 resolve 调用\n                         this.table_data = resp.body.results;\n                         this.loadingQ = false;\n                         this.loadedQ = true;\n                     }).\n                     catch((resp) => {\n                         this.loadingQ = false;\n                         this.loadedQ = true;\n                         if (resp.body.details === 'NOT_LOGIN.') {\n                             this.$message(\"请登录...\");\n                         } else if (resp.body.details === \"NOT_IN_CLASS.\") {\n                             this.$message(\"请先加入班级\");\n                         } else {\n                             this.$message(\"未知错误\");\n                         }\n                     });\n            },\n            refreshBlacklisting() {     // 刷新黑名单\n                this.black.loadingQ = true;\n                this.$http.post('/api/class/participants/show_blacklisting', { class_id: this.class_id }).\n                     then((res) => {\n                         this.black.loadingQ = false;\n                         this.black.loadedQ = true;\n                         this.blacklisting_data = res.body.results;\n                     }).\n                     catch((err) => {\n                         this.black.loadingQ = false;\n                         this.black.loadedQ = true;\n                         console.log('[Participants]', err);\n                     });\n            },\n            handleAdd: function () { // 向后端数据库发出添加数据的请求\n                this.loadingQ = true;\n                //TODO\n            },\n            handleDelete: function (id, realname, index) { // 向后端数据库发出删除数据的请求\n                this.\n                    $confirm(`真的要将${realname}移出教室吗？`, '提示', {\n                        confirmButtonText: '确认',\n                        cancelButtonText: '取消',\n                        type: 'warning'\n                    }).\n                    then(() => {\n                        this.loadingQ = true;\n                        return this.$http.post('/api/class/participants/delete', {\n                            class_id: this.class_id,\n                            user_id: id\n                        }, null);\n                    }).\n                    then(() => {\n                        this.$message.success(\"成功\");\n                        this.loadingQ = false;\n                        this.table_data.splice(index, 1);\n                        this.refreshBlacklisting();\n                    }).\n                    catch(() => {\n                        this.$message.error(\"失败\");\n                        this.loadingQ = false;\n                    });\n            },\n            handleAssignTA: function (id, index) { // 向后端数据库发出指定助教的请求\n                this.loadingQ = true;\n                this.$http.post('/api/class/participants/assignTA', {class_id: this.class_id, user_id: id}, null).\n                     then(() => {\n                         this.$message.success(\"成功\");\n                         this.loadingQ = false;\n                         this.table_data[index].role = 1;\n                     }).\n                     catch(() => {\n                         this.$message.error(\"失败\");\n                         this.loadingQ = false;\n                     });\n            },\n            handleCancelTA: function (id, index) { // 向后端数据库发出指定助教的请求\n                this.loadingQ = true;\n                this.$http.post('/api/class/participants/cancelTA', {class_id: this.class_id, user_id: id}, null).\n                     then(() => {\n                         this.$message(\"成功\");\n                         this.loadingQ = false;\n                         this.table_data[index].role = 2;\n                     }).\n                     catch(() => {\n                         this.$message(\"失败\");\n                         this.loadingQ = false;\n                     });\n            },\n            handleChange: function () { // 向后端数据库发出修改数据的请求\n                this.loadingQ = true;\n                this.edit_dialog.visual = false;\n                //TODO\n            },\n            successUpload: function (response, file, fileList, $event) {\n                this.loadingQ = true;\n                this.$http.post('/api/class/addstudents', {class_id: this.class_id, filename: response.filename}, null).\n                     then((resp) => {\n                         if(resp.body.status === 'SUCCESS.') {\n                             this.$message(\"成功\");\n                             this.loadingQ = false;\n                         } else {\n                             if(resp.body.details === 'NO STUDENTS FILE') {\n                                 this.$message(\"请上传xlsx文件\");\n                             }\n                             if(resp.body.details === 'NOT TEACHER'){\n                                 this.$message(\"您的身份没有导入学生的权限\");\n                             }\n                             this.loadingQ = false;\n                         }\n                     }).\n                     catch((resp) => {\n                         if(resp.body.details === 'NO STUDENTS FILE') {\n                             this.$message(\"请上传一个xlsx文件\");\n                         }\n                         if(resp.body.details === 'NOT TEACHER'){\n                             this.$message(\"您的身份没有导入学生的权限\");\n                         }\n                         this.loadingQ = false;\n                     });\n            },\n            handleCancelBlacklisting(user_id, index) { // 取消拉黑 user_id\n                this.black.loadingQ = true;\n                this.$http.post('/api/class/participants/white', { class_id: this.class_id, user_id: user_id }).\n                     then((res) => {\n                         this.black.loadingQ = false;\n                         this.$message('取消拉黑成功。');\n                         this.blacklisting_data.splice(index, 1);\n                     }).\n                     catch((res) => {\n                         this.black.loadingQ = false;\n                         this.$message('取消失败，见console');\n                         console.log(res);\n                     });\n            }\n        },\n    };\n</script>\n\n<style scoped>\n    .item {\n      margin: 4px;\n      width: 100px;\n      text-align: center;\n    }\n</style>\n\n\n\n// WEBPACK FOOTER //\n// src/components/resources/Participants.vue","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('el-container',[_c('el-collapse',{model:{value:(_vm.active_name),callback:function ($$v) {_vm.active_name=$$v},expression:\"active_name\"}},[_c('el-collapse-item',{attrs:{\"title\":\"班级成员\",\"name\":\"class-users\"}},[_c('div',{directives:[{name:\"loading\",rawName:\"v-loading\",value:(_vm.loadingQ),expression:\"loadingQ\"}],attrs:{\"id\":\"DataVisualizer\"}},[(_vm.loadedQ)?_c('div',[_c('el-table',{style:(_vm.display_config),attrs:{\"id\":\"display-table\",\"data\":_vm.fancy_data,\"highlight-current-row\":\"\",\"stripe\":\"\"}},[_vm._l((_vm.heads),function(obj){return _c('el-table-column',{key:obj.idx,attrs:{\"label\":obj.title,\"align\":\"center\",\"sortable\":\"\",\"prop\":obj.idx}})}),_vm._v(\" \"),(_vm.course_status.role!==2)?_c('el-table-column',{attrs:{\"align\":\"center\",\"label\":\"移出教室\"},scopedSlots:_vm._u([{key:\"default\",fn:function(scope){return [(scope.row.role > 0)?_c('el-button',{attrs:{\"type\":\"danger\",\"icon\":\"el-icon-delete\",\"circle\":\"\"},on:{\"click\":function($event){_vm.handleDelete(scope.row.id, scope.row.realname, scope.$index)}}}):_vm._e()]}}])}):_vm._e(),_vm._v(\" \"),(_vm.course_status.role===0)?_c('el-table-column',{attrs:{\"align\":\"center\",\"label\":\"指定助教\"},scopedSlots:_vm._u([{key:\"default\",fn:function(scope){return [(scope.row.role === 2)?_c('el-button',{attrs:{\"type\":\"primary\",\"icon\":\"el-icon-edit\",\"circle\":\"\"},on:{\"click\":function($event){_vm.handleAssignTA(scope.row.id, scope.$index)}}}):_vm._e()]}}])}):_vm._e(),_vm._v(\" \"),(_vm.course_status.role===0)?_c('el-table-column',{attrs:{\"align\":\"center\",\"label\":\"取消助教\"},scopedSlots:_vm._u([{key:\"default\",fn:function(scope){return [(scope.row.role === 1)?_c('el-button',{attrs:{\"type\":\"primary\",\"icon\":\"el-icon-edit\",\"circle\":\"\"},on:{\"click\":function($event){_vm.handleCancelTA(scope.row.id, scope.$index)}}}):_vm._e()]}}])}):_vm._e()],2)],1):_vm._e(),_vm._v(\" \"),(_vm.course_status.role!==2)?_c('div',{staticClass:\"item\"},[_c('el-form',{ref:\"ruleForm\",attrs:{\"model\":_vm.ruleForm}},[_c('el-form-item',[_c('el-upload',{staticClass:\"upload-demo\",attrs:{\"action\":\"/api/file/import\",\"on-success\":_vm.successUpload,\"file-list\":_vm.fileList}},[_c('el-tooltip',{attrs:{\"content\":\"请上传一个xlsx文件，文件中应含有需导入学生的真实姓名\"}},[_c('el-button',{attrs:{\"size\":\"small\",\"type\":\"primary\"}},[_vm._v(\"导入名单\\n                                    \")])],1)],1)],1)],1)],1):_vm._e()])]),_vm._v(\" \"),_c('el-collapse-item',{attrs:{\"title\":\"黑名单\",\"name\":\"blacklisting\"}},[_c('div',{directives:[{name:\"loading\",rawName:\"v-loading\",value:(_vm.black.loadingQ),expression:\"black.loadingQ\"}],attrs:{\"id\":\"Blacklisting\"}},[(_vm.black.loadedQ)?_c('div',[_c('el-table',{style:(_vm.display_config),attrs:{\"id\":\"blacklisting-table\",\"data\":_vm.blacklisting_data,\"highlight-current-row\":\"\",\"stripe\":\"\"}},[_vm._l((_vm.black.heads),function(obj){return _c('el-table-column',{key:obj.idx,attrs:{\"label\":obj.title,\"align\":\"center\",\"prop\":obj.idx}})}),_vm._v(\" \"),(_vm.course_status.role < 2)?_c('el-table-column',{attrs:{\"align\":\"center\",\"label\":\"取消拉黑\"},scopedSlots:_vm._u([{key:\"default\",fn:function(scope){return [_c('el-button',{attrs:{\"type\":\"warning\",\"icon\":\"el-icon-remove-outline\",\"circle\":\"\"},on:{\"click\":function($event){_vm.handleCancelBlacklisting(scope.row.user_id, scope.$index)}}})]}}])}):_vm._e()],2)],1):_vm._e()])])],1)],1)}\nvar staticRenderFns = []\nvar esExports = { render: render, staticRenderFns: staticRenderFns }\nexport default esExports\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/vue-loader/lib/template-compiler?{\"id\":\"data-v-13b40a2d\",\"hasScoped\":true,\"transformToRequire\":{\"video\":[\"src\",\"poster\"],\"source\":\"src\",\"img\":\"src\",\"image\":\"xlink:href\"},\"buble\":{\"transforms\":{}}}!./node_modules/vue-loader/lib/selector.js?type=template&index=0!./src/components/resources/Participants.vue\n// module id = null\n// module chunks = ","function injectStyle (ssrContext) {\n  require(\"!!../../../node_modules/extract-text-webpack-plugin/dist/loader.js?{\\\"omit\\\":1,\\\"remove\\\":true}!vue-style-loader!css-loader?{\\\"sourceMap\\\":true}!../../../node_modules/vue-loader/lib/style-compiler/index?{\\\"vue\\\":true,\\\"id\\\":\\\"data-v-13b40a2d\\\",\\\"scoped\\\":true,\\\"hasInlineConfig\\\":false}!../../../node_modules/vue-loader/lib/selector?type=styles&index=0!./Participants.vue\")\n}\nvar normalizeComponent = require(\"!../../../node_modules/vue-loader/lib/component-normalizer\")\n/* script */\nexport * from \"!!babel-loader!../../../node_modules/vue-loader/lib/selector?type=script&index=0!./Participants.vue\"\nimport __vue_script__ from \"!!babel-loader!../../../node_modules/vue-loader/lib/selector?type=script&index=0!./Participants.vue\"\n/* template */\nimport __vue_template__ from \"!!../../../node_modules/vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-13b40a2d\\\",\\\"hasScoped\\\":true,\\\"transformToRequire\\\":{\\\"video\\\":[\\\"src\\\",\\\"poster\\\"],\\\"source\\\":\\\"src\\\",\\\"img\\\":\\\"src\\\",\\\"image\\\":\\\"xlink:href\\\"},\\\"buble\\\":{\\\"transforms\\\":{}}}!../../../node_modules/vue-loader/lib/selector?type=template&index=0!./Participants.vue\"\n/* template functional */\nvar __vue_template_functional__ = false\n/* styles */\nvar __vue_styles__ = injectStyle\n/* scopeId */\nvar __vue_scopeId__ = \"data-v-13b40a2d\"\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nvar Component = normalizeComponent(\n  __vue_script__,\n  __vue_template__,\n  __vue_template_functional__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\nexport default Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/components/resources/Participants.vue\n// module id = null\n// module chunks = "],"sourceRoot":""}