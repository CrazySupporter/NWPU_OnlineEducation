{"version":3,"sources":["webpack:///src/components/resources/Settings.vue","webpack:///./src/components/resources/Settings.vue?d406","webpack:///./src/components/resources/Settings.vue"],"names":["Settings","__webpack_require__","randomString","data","class_id","CourseData","title","name","type","resources","loading","avaliable_resources","Resources","dialogImageUrl","dialogVisible","mounted","_this","this","$route","params","$http","post","then","res","body","status","$message","info","handleUpdate","methods","handleRemove","file","fileList","handlePictureCardPreview","url","$refs","description_display","description","notice_display","notice","onSubmit","location","reload","onEdit","content_id","editor","handleOpen","components","ContentEditor","ContentDisplay","resources_Settings","render","_vm","_h","$createElement","_c","_self","_v","directives","rawName","value","expression","ref","attrs","model","label-width","label","placeholder","callback","$$v","$set","titles","border","nativeOn","click","$event","action","list-type","class","on-preview","on-remove","staticClass","visible","on","update:visible","width","src","alt","updated","staticRenderFns","Component","normalizeComponent","ssrContext","__webpack_exports__"],"mappings":"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","file":"static/js/24.43e28059cebed81e7f5a.js","sourcesContent":["<template>\n    <el-container>\n        <el-header>\n            <h2>课程设置</h2>\n        </el-header>\n        <el-main>\n            <el-form ref=\"form\" :model=\"CourseData\" label-width=\"140px\" v-loading='loading'>\n                <el-form-item label=\"课程名称：\">\n                    <el-input v-model=\"CourseData.title\" placeholder=\"请输入\"></el-input>\n                </el-form-item>\n                <el-form-item label=\"课程权限：\">\n                    <el-radio v-model=\"CourseData.type\" :label='1'>公开</el-radio>\n                    <el-radio v-model=\"CourseData.type\" :label='2'>私密</el-radio>\n                </el-form-item>\n                <el-form-item label=\"课程资源：\">\n                    <el-transfer v-model=\"resources\" :data=\"avaliable_resources\"\n                                 :titles=\"['可用资源','已选资源']\"></el-transfer>\n                </el-form-item>\n                <el-form-item label=\"课程简介：\">\n\t\t\t\t\t<ContentDisplay @click.native='onEdit(CourseData.description)' :border='true' ref='description_display'>\n\t\t\t\t\t</ContentDisplay>\n                </el-form-item>\n                <el-form-item label=\"课程公告：\">\n\t\t\t\t\t<ContentDisplay @click.native='onEdit(CourseData.notice)' :border='true' ref='notice_display'>\n\t\t\t\t\t</ContentDisplay>\n                </el-form-item>\n\n                <el-form-item label=\"上传课程图片：\">\n                    <el-upload\n                        action=\"/api/file/uploadcourseimg\"\n                        list-type=\"picture-card\"\n                        :data='{class:class_id}'\n                        :on-preview=\"handlePictureCardPreview\"\n                        :on-remove=\"handleRemove\">\n                        <i class=\"el-icon-plus\"></i>\n                    </el-upload>\n                    <el-dialog :visible.sync=\"dialogVisible\">\n                        <img width=\"100%\" :src=\"dialogImageUrl\" alt=\"\">\n                    </el-dialog>\n                </el-form-item>\n\n                <el-form-item>\n                    <el-button type=\"primary\" @click=\"onSubmit\">更新</el-button>\n                </el-form-item>\n                <ContentEditor ref=editor\n\t\t\t\t\t@updated='handleUpdate'\n\t\t\t\t>\n\t\t\t\t</ContentEditor>\n            </el-form>\n        </el-main>\n    </el-container>\n</template>\n\n<script>\n/* eslint-disable camelcase */\n\nimport {avaliable_resources} from '../../utils/Resources';\nimport ContentEditor from '../components/ContentEditor.vue';\nimport ContentDisplay from '../components/ContentDisplay.vue';\nvar randomString = require('../../utils/funcs').randomString;\n\nexport default {\n\tdata () {\n\t\treturn {\n\t\t\tclass_id: null,\n\t\t\tCourseData: {\n\t\t\t\ttitle: null,\n\t\t\t\tname: null,\n\t\t\t\ttype: null,\n\t\t\t},\n\t\t\tresources: [],\n\t\t\tloading: true,\n\t\t\tavaliable_resources: avaliable_resources,\n            dialogImageUrl: '',\n            dialogVisible: false\n\t\t};\n\t},\n\tmounted: function () {\n\t\tthis.class_id = this.$route.params.class_id;\n\t\tthis.$http.post('/api/class/info/query', {class_id: this.class_id}).\n\t\t\tthen((res) => {\n\t\t\t\tif (res.body.status === 'NOT FOUND.') {\n\t\t\t\t\tthis.$message(\"Room \" + this.class_id + \" not found!\");\n\t\t\t\t} else {\n\t\t\t\t\tthis.CourseData = res.body.info;\n\t\t\t\t\tthis.resources = res.body.resources;\n\t\t\t\t\tthis.loading = false;\n\t\t\t\t\tthis.handleUpdate();\n\t\t\t\t}\n\t\t\t});\n\t},\n\tmethods: {\n        handleRemove(file, fileList) {\n        },\n        handlePictureCardPreview(file) {\n            this.dialogImageUrl = file.url;\n            this.dialogVisible = true;\n        },\n\t\thandleUpdate: function () {\n\t\t\tthis.$refs.description_display.handleUpdate(this.CourseData.description);\n\t\t\tthis.$refs.notice_display.handleUpdate(this.CourseData.notice);\n\t\t},\n\t\tonSubmit () {\n\t\t\tthis.$http.post('/api/class/info/update', {\n\t\t\t\tresources: this.resources,\n\t\t\t\tinfo: this.CourseData,\n\t\t\t\tclass_id: this.class_id\n\t\t\t}).\n\t\t\t\tthen(function (res) {\n\t\t\t\t\tthis.$message(\"课程信息已更新\");\n\t\t\t\t\tlocation.reload();\n\t\t\t\t});\n\t\t},\n\t\tonEdit (content_id) {\n\t\t\tthis.$refs.editor.handleOpen(content_id);\n\t\t},\n\t},\n\tcomponents: {\n\t\t'ContentEditor': ContentEditor,\n\t\t'ContentDisplay': ContentDisplay\n\t}\n};\n</script>\n\n<style scoped>\nh2 {\n\ttext-align: center;\n}\n</style>\n\n\n\n// WEBPACK FOOTER //\n// src/components/resources/Settings.vue","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('el-container',[_c('el-header',[_c('h2',[_vm._v(\"课程设置\")])]),_vm._v(\" \"),_c('el-main',[_c('el-form',{directives:[{name:\"loading\",rawName:\"v-loading\",value:(_vm.loading),expression:\"loading\"}],ref:\"form\",attrs:{\"model\":_vm.CourseData,\"label-width\":\"140px\"}},[_c('el-form-item',{attrs:{\"label\":\"课程名称：\"}},[_c('el-input',{attrs:{\"placeholder\":\"请输入\"},model:{value:(_vm.CourseData.title),callback:function ($$v) {_vm.$set(_vm.CourseData, \"title\", $$v)},expression:\"CourseData.title\"}})],1),_vm._v(\" \"),_c('el-form-item',{attrs:{\"label\":\"课程权限：\"}},[_c('el-radio',{attrs:{\"label\":1},model:{value:(_vm.CourseData.type),callback:function ($$v) {_vm.$set(_vm.CourseData, \"type\", $$v)},expression:\"CourseData.type\"}},[_vm._v(\"公开\")]),_vm._v(\" \"),_c('el-radio',{attrs:{\"label\":2},model:{value:(_vm.CourseData.type),callback:function ($$v) {_vm.$set(_vm.CourseData, \"type\", $$v)},expression:\"CourseData.type\"}},[_vm._v(\"私密\")])],1),_vm._v(\" \"),_c('el-form-item',{attrs:{\"label\":\"课程资源：\"}},[_c('el-transfer',{attrs:{\"data\":_vm.avaliable_resources,\"titles\":['可用资源','已选资源']},model:{value:(_vm.resources),callback:function ($$v) {_vm.resources=$$v},expression:\"resources\"}})],1),_vm._v(\" \"),_c('el-form-item',{attrs:{\"label\":\"课程简介：\"}},[_c('ContentDisplay',{ref:\"description_display\",attrs:{\"border\":true},nativeOn:{\"click\":function($event){_vm.onEdit(_vm.CourseData.description)}}})],1),_vm._v(\" \"),_c('el-form-item',{attrs:{\"label\":\"课程公告：\"}},[_c('ContentDisplay',{ref:\"notice_display\",attrs:{\"border\":true},nativeOn:{\"click\":function($event){_vm.onEdit(_vm.CourseData.notice)}}})],1),_vm._v(\" \"),_c('el-form-item',{attrs:{\"label\":\"上传课程图片：\"}},[_c('el-upload',{attrs:{\"action\":\"/api/file/uploadcourseimg\",\"list-type\":\"picture-card\",\"data\":{class:_vm.class_id},\"on-preview\":_vm.handlePictureCardPreview,\"on-remove\":_vm.handleRemove}},[_c('i',{staticClass:\"el-icon-plus\"})]),_vm._v(\" \"),_c('el-dialog',{attrs:{\"visible\":_vm.dialogVisible},on:{\"update:visible\":function($event){_vm.dialogVisible=$event}}},[_c('img',{attrs:{\"width\":\"100%\",\"src\":_vm.dialogImageUrl,\"alt\":\"\"}})])],1),_vm._v(\" \"),_c('el-form-item',[_c('el-button',{attrs:{\"type\":\"primary\"},on:{\"click\":_vm.onSubmit}},[_vm._v(\"更新\")])],1),_vm._v(\" \"),_c('ContentEditor',{ref:\"editor\",on:{\"updated\":_vm.handleUpdate}})],1)],1)],1)}\nvar staticRenderFns = []\nvar esExports = { render: render, staticRenderFns: staticRenderFns }\nexport default esExports\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/vue-loader/lib/template-compiler?{\"id\":\"data-v-108b8332\",\"hasScoped\":true,\"transformToRequire\":{\"video\":[\"src\",\"poster\"],\"source\":\"src\",\"img\":\"src\",\"image\":\"xlink:href\"},\"buble\":{\"transforms\":{}}}!./node_modules/vue-loader/lib/selector.js?type=template&index=0!./src/components/resources/Settings.vue\n// module id = null\n// module chunks = ","function injectStyle (ssrContext) {\n  require(\"!!../../../node_modules/extract-text-webpack-plugin/dist/loader.js?{\\\"omit\\\":1,\\\"remove\\\":true}!vue-style-loader!css-loader?{\\\"sourceMap\\\":true}!../../../node_modules/vue-loader/lib/style-compiler/index?{\\\"vue\\\":true,\\\"id\\\":\\\"data-v-108b8332\\\",\\\"scoped\\\":true,\\\"hasInlineConfig\\\":false}!../../../node_modules/vue-loader/lib/selector?type=styles&index=0!./Settings.vue\")\n}\nvar normalizeComponent = require(\"!../../../node_modules/vue-loader/lib/component-normalizer\")\n/* script */\nexport * from \"!!babel-loader!../../../node_modules/vue-loader/lib/selector?type=script&index=0!./Settings.vue\"\nimport __vue_script__ from \"!!babel-loader!../../../node_modules/vue-loader/lib/selector?type=script&index=0!./Settings.vue\"\n/* template */\nimport __vue_template__ from \"!!../../../node_modules/vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-108b8332\\\",\\\"hasScoped\\\":true,\\\"transformToRequire\\\":{\\\"video\\\":[\\\"src\\\",\\\"poster\\\"],\\\"source\\\":\\\"src\\\",\\\"img\\\":\\\"src\\\",\\\"image\\\":\\\"xlink:href\\\"},\\\"buble\\\":{\\\"transforms\\\":{}}}!../../../node_modules/vue-loader/lib/selector?type=template&index=0!./Settings.vue\"\n/* template functional */\nvar __vue_template_functional__ = false\n/* styles */\nvar __vue_styles__ = injectStyle\n/* scopeId */\nvar __vue_scopeId__ = \"data-v-108b8332\"\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nvar Component = normalizeComponent(\n  __vue_script__,\n  __vue_template__,\n  __vue_template_functional__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\nexport default Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/components/resources/Settings.vue\n// module id = null\n// module chunks = "],"sourceRoot":""}