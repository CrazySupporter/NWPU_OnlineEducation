webpackJsonp([11],{"3IxH":function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var s={data:function(){return{chatrecords:[],class_id:"undefined",role:void 0,inputData:{userId:void 0,classId:void 0,message:void 0}}},mounted:function(){var t=this;this.class_id=this.$route.params.class_id,this.inputData.classId=this.class_id,this.$http.get("/api/user/session",{}).then(function(e){t.inputData.userId=e.body.user_id,t.$http.post("/api/chat/info/query",{class_id:t.class_id}).then(function(t){"NOT FOUND."===t.body.status?this.$message("Room "+this.title+" not found!"):(this.chatrecords=t.body.chatrecords,this.role=t.body.role)})})},methods:{onSubmit:function(){this.$http.post("/api/chat/add_comments",{userid:this.inputData.userId,classid:this.inputData.classId,message:this.inputData.message}).then(function(t){"SUCCESS."===t.body.status&&this.$router.go(0)})},onClear:function(){this.$http.post("/api/chat/clear_comments",{classid:this.inputData.classId}).then(function(t){"SUCCESS."===t.body.status&&(this.chatrecords=[])})},handleCurrentChange:function(t){this.$router.push({name:"posts",params:{forumid:t.forumid}})}}},i={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("el-container",[a("el-main",[a("el-card",{staticClass:"box-card"},[a("div",{staticClass:"clear-fix",attrs:{slot:"header"},slot:"header"},[a("h2",[t._v("讨论区")])]),t._v(" "),a("el-table",{staticStyle:{width:"100%"},attrs:{data:t.chatrecords,stripe:""},on:{"current-change":t.handleCurrentChange}},[a("el-table-column",{attrs:{prop:"nickname",label:"发贴人",width:"180"}}),t._v(" "),a("el-table-column",{attrs:{prop:"message",label:"主题",width:"280"}}),t._v(" "),a("el-table-column",{attrs:{prop:"registration_date",label:"发贴时间",width:"180"}})],1)],1),t._v(" "),a("el-form",[a("el-form-item",{attrs:{label:"Input "}},[a("el-input",{attrs:{type:"textarea",rows:4,placeholder:"请输入内容"},model:{value:t.inputData.message,callback:function(e){t.$set(t.inputData,"message",e)},expression:"inputData.message"}})],1),t._v(" "),a("el-form-item",[a("el-button",{attrs:{type:"primary"},on:{click:t.onSubmit}},[t._v("发贴")])],1),t._v(" "),a("el-form-item",[0===t.role?a("el-button",{attrs:{type:"primary"},on:{click:t.onClear}},[t._v("clear")]):t._e()],1)],1)],1)],1)},staticRenderFns:[]};var r=a("VU/8")(s,i,!1,function(t){a("zrvO")},"data-v-de6c9e48",null);e.default=r.exports},zrvO:function(t,e){}});
//# sourceMappingURL=11.58663c5fbf1471c4cfde.js.map